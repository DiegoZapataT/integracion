<!DOCTYPE html>
<html lang="es">
<head>
    <title>base</title>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1.0">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" 
    crossorigin="anonymous">
    

    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.css">
    <link rel="stylesheet" href="{{url_for('static', filename='css/Editor.min.css')}}">
    <link rel="stylesheet" href="/static/css/style.css">

    <script src="{{url_for('static', filename='js/Editor.min.js')}}"></script>
    <script src="{{url_for('static', filename='js/JSindex.js')}}"></script>
    
    <script></script> 

</head>
<body>
        {% from "macros.html" import render %}
    <div style="background-color: #00acf7; padding: 20px;"><h1 style="color: #ffffff;" class="text-center">Proyecto: Editor de texto</h1></div>
    <hr>

    <div class="container">
        <div class="row">
            <div class="col-4 d-felx flex-column justify-content-center">
                <div>
                    <form action="/" method="POST">
                        <p>ID: <br> <input type="number" min="1" name="ID" ></p>
                        <input type="submit" value="Enviar">
                    </form>
                </div>
                <br>

                <div>
                    <form method="GET">
                        <div class="form-group col-md-4">
                            <label for="tags">Tags:</label>
                            <select id="tags" class="form-control">
                                <option selected>Elige...</option>
                                {%for key in key%}
                                    {%if key != "_id" %}
                                        <option>{{key}}</option>
                                    {% endif %}
                                {%endfor%}
                            </select>
                        </div>
                    </form>    
                </div>  
                <div id="tag_documento">
                    <form method="GET">
                        <div class="form-group col-md-4">
                            <label for="tag_doc">Tags documento:</label>
                            <select id="tag_doc" class="form-control">
                                <option selected>...</option>
                                {%for key in key_doc%}
                                    {%if key != "_id" %}
                                        <option>{{key}}</option>
                                    {% endif %}
                                {%endfor%}
                            </select>
                        </div>
                    </form>    
                </div> 
                <div id="tag_desarrollo">
                    <form method="GET">
                        <div class="form-group col-md-4">
                            <label for="tag_des">Tags desarrollo:</label>
                            <select id="tag_des" class="form-control">
                                <option selected>...</option>
                                {%for key in key_des%}
                                    {%if key != "_id" %}
                                        <option>{{key}}</option>
                                    {% endif %}
                                {%endfor%}
                            </select>
                        </div>
                    </form>    
                </div>     
                <hr>	
                <div class="row ">
                    <div class="col d-flex justify-content-around" >
                        <button type="button" class="btn btn-info text-white" id="doc">Documentos</button>
                        <button type="button" class="btn btn-info text-white" id="des">Desarrollo</button>
                        <button type="button" class="btn btn-info text-white" id="json">Json Completo</button>
                    </div>
                    <div class="row p-3 my-3 border d-flex">
                        <p id="contenedor1">Documento</p>
                        <p id="contenedor2"></p>
                        <p id="contenedor3"></p>
                    </div>      
                </div>    
            </div>
            <br>
            
            <br><br>
            
            
            
            <!-- EDITOR DE TEXTO -->
            <div class="container-xxl col p-3 my-3 border">
                <input type="text" id="RichText"/>
            </div>
        </div>
    </div>
    <footer>
        <p>Copyright &copy; <script>document.write(new Date().getFullYear());</script> UCT</p>
    </footer>

    <script>
        $("#tag_documento").hide();
        $("#tag_desarrollo").hide();
        $("#contenedor2").hide();
        $("#contenedor3").hide();
        
        var data = JSON.parse('{{ data|tojson}}');

        $("#tags").change(function(){
            $("#tag_documento").hide();
            $("#tag_desarrollo").hide();
            $("#contenedor2").hide();
            $("#contenedor3").hide();
            var seleccion =($('option:selected', $(this)).text());            
            if (seleccion != 'documentos'){
                $('#contenedor1').text(data[seleccion]);
            } else{
                $("#tag_documento").show();
            }   
        })
        var doc_tag = data.documentos[0]
        $("#tag_documento").change(function(){
            $("#tag_desarrollo").hide();
            $("#contenedor2").hide();
            $("#contenedor3").hide();
            var tagsdoc =($('option:selected', $(this)).text());            
            if (tagsdoc != 'desarrollo'){
                $('#contenedor1').text(doc_tag[tagsdoc]);
            } else {
                $("#tag_desarrollo").show();
            }
        })

        var des_tag = doc_tag.desarrollo[0];
        $("#tag_desarrollo").change(function(){
            $("#contenedor2").hide();
            $("#contenedor3").hide();
            var tagsdes =($('option:selected', $(this)).text());            
                $('#contenedor1').text(des_tag[tagsdes]);
        })

        $( "#json" ).click(function() {
            var doc = data.documentos[0]
            $('#contenedor1').text('{{data}}');
        });

        $( "#doc" ).click(function() {
            var doc = data.documentos[0]
            $('#contenedor1').text(doc['titulo']);
            $("#contenedor2").show();
            $('#contenedor2').text(doc['subtitulo']);
            $("#contenedor3").show();
            $('#contenedor3').text(doc['fecha']);
        });

        $( "#des" ).click(function() {
            $("#contenedor3").hide();
            var doc = data.documentos[0]
            var des = doc.desarrollo[0];
            $('#contenedor1').text(des['titulo_parrafo']);
            $("#contenedor2").show();
            $('#contenedor2').text(des['parrafo']);
        });

    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" 
    crossorigin="anonymous"></script>
</body>
</html>